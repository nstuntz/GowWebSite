@model IEnumerable<GowWebSite.Models.City>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>
@using (Html.BeginForm())
{

    @Html.AntiForgeryToken()
<div class="form-group">
    <div class="control-label col-md-1 col-sm-1">@Html.Raw("Alliance:")</div>    
    <div class="col-md-2 col-sm-2">
        @Html.DropDownList("AllianceID", null, "-- Select One --", htmlAttributes: new { @class = "form-control" })
    </div>
    <div class="control-label col-md-9 col-sm-9">
        <input type="submit" class = "btn btn-primary" value="Filter" />
    </div>
</div>
}

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.CityName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Alliance.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Login.UserName)
        </th>
        <th>
            Min Since
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ResourceType.Type)
        </th>
        <th>
            SH Lvl
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CityInfo.NeedRSS)
        </th>
        <th>
            RSS Image
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) 
{
    <tr>
        <td>
            @Html.ActionLink(item.CityName, "Details", "CityInfo", new { id = item.CityID}, null )
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Alliance.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Login.UserName)
        </td>
        <td>
            @item.CityInfo.City.Login.RunSince.ToString("F0")
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ResourceType.Type)
        </td>
        <td>            
            @Html.DisplayFor(modelItem => item.CityInfo.StrongHoldLevel)
        </td>
        <td>
            @if (item.CityInfo.Upgrade)
            { 
                @Html.DisplayFor(modelItem => item.CityInfo.NeedRSS)
            }
        </td>
        <td>
            <img src='/Images/RSSImage_@(item.CityID).jpg' />
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.CityID }) |
            @Html.ActionLink("Details", "Details", new { id=item.CityID })
 
        </td>
    </tr>
}

</table>

@Html.ActionLink("Create New", "CreateFull", null, new { @class = "btn btn-default" })
@Html.ActionLink("Set Athena Gift", "UpdateAthenaGift", null, new { @class = "btn btn-default" })